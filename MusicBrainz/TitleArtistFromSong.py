#!/usr/bin/python
# encoding: utf=8

# Print infos regarding the song given.

usage = """
Usage: 
    python TitleArtistFromSong.py <song.mp3>

Example:
    python TitleArtistFromSong.py songData.tab
"""

import shlex
from subprocess import Popen, PIPE

# @brief Extraire la duree de la musique.
# @param filesong Le nom du fichier.mp3.
def extractDuration(fileSong):
	cmd = "./fpcalc " + fileSong
	process = Popen(shlex.split(cmd), stdout = PIPE)
	data = process.communicate()
	exit_code = process.wait()
	
	dataS = data[0]
	beginning = dataS.find ("DURATION=") + len ("DURATION=")
	ending = dataS.find ("\nFINGERPRINT=")
	return dataS [beginning:ending]


if __name__ == '__main__':
	import sys
	
	try:
		song = sys.argv[1]
	except:
		print usage
		sys.exit(-1)
		
	print extractDuration(song)
	
	
# http://api.acoustid.org/v2/lookup?client=ULjKruIh&meta=sources+recordings&duration=230&fingerprint=AQADtMkSJYwYJ4EVZscLuYV4BSWZ4BwQkoyFJk2i4-iX4PDRB2sz9GguZbgGJgpJ5M0SHKm6HPly-Iee7EHDFS_CPJnR4wn6A9_xiziOPMN7EY-CVsnwo3sgfscXBX5wHt9xHeXjoQ_8BD0u9IsHXSUeeB3kH-8C4WqON0fO4dlxikezjMGPHtSL8Lg2Q5dw4eixH8d3OD9y9eiDytnRPMcX4zymw8_wovY5HPeRXUejH-dhZwneIN-CH1d3-BdK7JOMPNAeEWnFh-hvPMeN53j2IJRh54Z-hLqCD8-Pas9RaxdyaDIaPvjRxrAePErw44fPwFWGc9Bj5NnhJGRQTTnKLoafACHnQ89a5MGPi-FxDZV6YevxowGvDDnO44d2_ELsHSvhUriPZ4fPGMeubIfP4Dn6Nxt-5MdRUdWRJQ867gp-vMfhdaie4y_6I3LhL4fWI8-NXhLcCb_xo2-CU9GRHz20KLGOKx_Oo3mOkJSOa0FIEmIXHce7GL-CkkE-pshF4UuMvkYTS9DJFLmWo9J6-AmJR3jQT0f-FHqWIxfRKx0cUzychFnwLDu2ijF--Ki3HMeLy0bYD35iBWpDpHIUvPh5eBfcUfik4TF8HleOZEee4zwe4ZcflM_xFLkm-XgVwcdxBRePQx-P7QsO7zhqohf0qRA9oSSNLzw0XtCDo_qCB2Uv_MKVI0ePjsnRqMceglcWZeiOKWrG4gx-4L4QPrsgIlxDVH6AWpJFnDmmJaOH5hGN4xkN6scXPRh55Dh0CSeUB7pEo8kPS6KQZ3hKnOIFjwwe-MdvPPth58OR7MuRh7hxPiqOh8OjLDnCZ9lwuA104p-AnUsqHMa7GH10aC5-2PCOZ9CqLDHwPKiu4Cq-LDiFZzDTBPfhaHiRPo9RacW0KcvRcGDW-LCeYc8FM8sRKoeOZlKijOgXhE90NNFxD636wRFDB36PyjmL6fURJjkPPjpyDMcu4zu-4GB6pIf4UEWOf4d1CdzhF8-ESzG8ow-uIzx8iM9RHD-PZ7kCXTrxLDhx62gObT_GC-Hx407xHDlOHeJx1kH4ZKaACp_hK8jx3FBnVJmyBU9yaInk6Oh5hM_WwnWMJzO2ijkqH1yaBZFOwk8-GNovPMcp_LhxzSiVH2n4HD_8qRjTo_nA73iCHfmhH9ex40PzIKfxZbCNO4L14x18Hrcwd8EP_8gPzUeOFzviC_obhFGyHCdToTlxXD5CH1ryIbpx9BFO1JqKr0f4QnyOkGSMOyQu_MVRSQ6PMFyOiwz6w6eOJ9OCnDs-0YbPBn-OiZJ2fKEGTuSDPVmH9Ece40fQZ9DxusiJH56io0xU3Ef0CXIPsoly5MeTHHsjJMixo9RmUA6MayHymlCe5UhvfMe_Y5u24Phy-Hjwx-hFPMcHrlqOZlSOvlOI7wgTB_rxHyF74kF9-DzKPMLw6Mi35LgI8SnRD_4QninK7Ggi_PiSHImLXMF7POgbw90OXzH86Ei2SkGeCRejJHh6fDnSM4aeEXmMi8KVZClCJfk3qA_CPMGPSzp-nEJD7Sh1VE-MH7GYeVB-5AI1cej1oQ8N14ZPVHrQ50guHnk5-DrOF88Cj8SPb4ef48kH_uiP94gp5inyd-iPy0f4GvWhv2h1vAi9E817PNdx7HimBs8RBjoahyIRK3GM52hQUcJzJFeGPGtxSbzQNS98BdUVD8dTpUhe5ExkXEtSPBJ6NDXx0cjNQdcbPEMV7dAyvzh14xLysMGP-kWzJcdzI7xyOM_RNYdCHv2JIwvlFLUy-MKTwzHRhUH4Q6SlIW744PB3XKqFHz5xH36OG9R59Cf-IRdz_Ifm4lKMWOvhD_5y_IY_XEfYH3vwMbi1QlceuEOeo8psNNGT4tlRK0Hj7LiUXPgYC6HEDNYD9aiV5fijI594NE_Qzwiz52gda3iYxUJM5Wi8D30W_HiOry4eHqF4aEluIreEq8cPPMuDZhfqBtUDKzwiEiKPdAPj40MveLrwFmeOPDZESTzy4JLgN3Ac4hKOF8fno3nwEzdy5mASOYFmHj2s8nCcT3gUPjjeDXdwPMf04A_OHKV0QksadHvRVC2uIMwWVMR1PM2MHg4b5MEP54OMdkR9wcoT3DLu7PiYopShSzH6DE0e5InwLEe15zizw2dwyXiGZBbTI8-CWzH-42mWo8zgdXEw2UaP5vh25MLlDYcW3griB3ayHD9-OBWPw5OY4Dz85Ub_ITly5cd9HH98PCoeUkj2XEjTcPjxIfYNPwt-KGOKe4mFD4d_XDy-Hh-0JxJOPFLwQ2uow3UsqA4-wcebHM6D9NnRKhLuomv4oTGzYs8CTs-GXse-4HmO5viRo61Y-NCLHJe-olSSHXeO6WvR5DkO5jWaJtiVI4d-5DmOkcjROEyRP3gk-Dyuwwqz4BQHP8ON87jyCEby7AgfZjiuDf9zXNpx9wj1aNC343iZ4_ghHt-NPccLH58FN7hyAcGEEYC4IARQgAEGADOAAaEEJUgATiUhlDEiiEHMAKGY4EYBIighxBABDAPAKaWUUggUBQRpxghAMEHAEIuBFSYohyBAhhjjAAEGKCUAM4wwBoAhTjgBABCCAmcIEwQAQKAiDjghiQBMGKAQUAgRB4wwgDEBiECAEQGQUwAeIpgixhiAoDFCGQIAIUgCAADXAhGCkCACOAEEEQwAoABylDAhgDFGEKEQAJARYBQAQDoKHCJCOipAEAAQBoABVCEChBCUWIAMgBACaQSAiklICAANAEAEQEAjR5ESRmmGqAGIKAcEQwAJBoBhxCEQFBQGAKOAAI4QwpRhQApmABNSAoMQYQKBJAQgQgEBBCACEEMOUgQEBSQARgDAmBDIMqsYUgIQAhRjAAoBgJAOKUuJUAQIwoRQiAghFGICCCQYIZQAgQgwAEAqAERcGQUYEgQpAwwBAiAKBFUGwMu9AYoABwEQDhZHmAFIQWQoIEABYAARBADikAHGQCagQIyBIgWFUhiDkGRcAEKEQgAI8RhiyFkFHHNGOAKMA0gpAIEjBBCAhTAOKeGII4AQIARABBmAJCJAWICUIkwQA4kgAhAhBCCACQAAAoQxiwACinAgpBIAAOQAFE4pRhAQjABmHCREOCmMAIAQIAoSSHGEAGAKAaIUUoYYQYABigFkrCIOACgEYUogBwwFkCAADBNAMCKEMFAgA5QxBBHkBDGSCEOMAAAAYIgAghjBIAiEIAgUIlIQAw0DwGEFGFBAIUdgE49g5JxiAghFgFPIEU8kMcYIAIIQkiHAAAHEIGCUYIAQABgjggClgAAACUWoIAASoYhjQABhkEFAIRAMgIIIKyAACgBHhUKACCikIkIwIIgBDAggjENACEEoUwAAA4FShjkmiEiMCS6IZEAwBQBmDhEEgeJACECcQIYQCQRFTgCBEEEQEQ
